<!DOCTYPE html>

<html>
<head>
<title>Пожертвование</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
<meta charset="utf-8">

<style>
@import url('https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700;800&display=swap');

#who, #send {
	transition: color 1s !important
}

#noTea {
	transition: background 1s !important
}

.Money {
	transition: box-shadow 1s !important;
    position: relative;
    overflow: hidden;
	z-index: 1;
	margin: 36px 0;
}

.Money.Already {
    background: #FFF;
    color: #333;
    border: 1px solid #333;
    box-shadow: 0px 0px 40px -25px #333;
	transition: color 1s, border 1s, box-shadow 1s  !important
}

#colorTrick {
    position: absolute;
    left: 0;
    top: 0;
    width: 100%;
    height: 100%;
    background: #transparent;
	opacity: 0;
	pointer-events: none;
    z-index: -1;
	transition: opacity 1s !important
	
}

body {
	margin: 25px;
    background: #FeFeFe;
	font-family: "Montserrat", "Roboto", "Arial", sans-serif;
}
.wrap {
    width: 100%;
    max-width: 300px;
    background: #FFF;
    overflow: hidden;
    border-radius: 30px;
    margin: auto;
    padding: 45px;
    box-shadow: 0px 0px 30px #dcdcdc;
   -moz-box-shadow: 0px 0px 30px #dcdcdc;
   -webkit-box-shadow: 0px 0px 30px #dcdcdc;
}

.Money {
    width: 100%;
    background: rgb(0, 127, 255);
    background: linear-gradient(to right bottom, #444, #222 120%);
    border-radius: 20px;
	padding: 20px;
    box-sizing: border-box;
    color: #FFF;
    box-shadow: 0px 0px 30px rgba(0,0,0,.3);
    -moz-box-shadow: 0px 0px 30px rgba(0,0,0,.3);
    -webkit-box-shadow: 0px 0px 30px rgba(0,0,0,.3);
}
input[type="number"]::-webkit-outer-spin-button,
input[type="number"]::-webkit-inner-spin-button {
    -webkit-appearance: none; // Yeah, yeah everybody write about it
}

input[type='number'],
input[type="number"]:hover,
input[type="number"]:focus {
    appearance: none;
    -moz-appearance: textfield;
}
.mWrap {
    padding: 20px 0;
    display: flex;
    justify-content: center;
}
.mButton:after {
    content: "";
    position: absolute;
    top: 50%;
    width: 50%;
    left: 25%;
    height: 1px;
    text-align: center;
    font-size: 32px;
    font-weight: 100;
    font-family: monospace;
    background: #FFF;
}

.mButton.mPlus:before{
	content: "";
    position: absolute;
    left: 50%;
    width: 1px;
    top: 25%;
    height: 50%;
    text-align: center;
    font-size: 32px;
    font-weight: 100;
    font-family: monospace;
    background: #FFF;
}
.mButton {
    width: 40px;
    height: 40px;
    border-radius: 50%;
    position: relative;
	box-shadow: 0 0 0 1px rgba(255,255,255,.5);
	-moz-box-shadow: 0 0 0 1px rgba(255,255,255,.5);
	-webkit-box-shadow: 0 0 0 1px rgba(255,255,255,.5);
	transition: .3s box-shadow, .3s opacity;
}




.mButton:active, .amountsWrap>div:active {
	box-shadow: 0 0 0 3px rgba(255,255,255,1);
	-moz-box-shadow: 0 0 0 3px rgba(255,255,255,1);
	-webkit-box-shadow: 0 0 0 3px rgba(255,255,255,1);
	transition: 0s box-shadow, .3s opacity;
}

input.cash {
    background: none;
    border: none;
    text-align: center;
    width: 77px;
    padding: 0 10px;
    color: #FFF;
    font-family: "Montserrat", "Roboto", "Arial", sans-serif;
    font-size: 26px;
}
input.cash:focus {
    border: none;
    outline: none;
}


input[type="text"] {
    width: 100%;
    padding: 10px;
    border: none;
    border-radius: 10px;
    margin: 20px 0px;
    background: transparent;
    color: #FFF;
    font-family: "Montserrat", "Roboto", "Arial", sans-serif;
    font-size: 14px;
	box-sizing: border-box;
	box-shadow: 0 0 0 1px rgba(255,255,255,.5) inset;
	-moz-box-shadow: 0 0 0 1px rgba(255,255,255,.5) inset;
	-webkit-box-shadow: 0 0 0 1px rgba(255,255,255,.5) inset;
	transition: .3s box-shadow
}


input[type="text"]:focus {
    outline: none;
	box-shadow: 0 0 0 3px rgba(255,255,255,1) inset !important;
	-moz-box-shadow: 0 0 0 3px rgba(255,255,255,1) inset !important;
	-webkit-box-shadow: 0 0 0 3px rgba(255,255,255,1) inset !important;
}
input[type="text"]::placeholder {
	color: rgba(255,255,255,.5)
}

.Money p {
    padding: 20px 0;
}

p.disclaimer {
    padding: 0;
    margin: 0;
    color: #888;
    font-weight: 100;
}

button.send {
    color: #222;
    background: #FFF;
    border: none;
    padding: 10px;
    font-family: "Montserrat", "Roboto", "Arial", sans-serif;
    font-size: 14px;
    box-sizing: border-box;
    border-radius: 10px;
    width: 100%;
	cursor: pointer;
}
h1 {
    margin: 0;
    font-size: 28px;
}

.descSpan {
opacity: .6; 
font-size: 10px
}

.amountsWrap {
    display: flex;
    padding-bottom: 10px;
}

.amountsWrap>div {
    padding: 5px 10px;
	box-shadow: 0 0 0 1px rgba(255,255,255,.5);
	-moz-box-shadow: 0 0 0 1px rgba(255,255,255,.5);
	-webkit-box-shadow: 0 0 0 1px rgba(255,255,255,.5);
	transition: .3s box-shadow;
    border-radius: 10px;
    margin: 10px auto;
}

.amountsWrap>div:first-child {
    margin-left: 0 !important;
}

.amountsWrap>div:last-child {
    margin-right: 0 !important;
}

#am0:after {
	content: '100';
}

#am1:after {
	content: '300';
}

#am2:after {
	content: '500';
}

#am3:after {
	content: '1000';
}

#noTea {
    position: absolute;
    z-index: 1;
    width: 100%;
    height: 2px;
    background: #222;
    left: 0;
    top: 48%;
    box-shadow: 0 2px 0 0 #fff;
}

.teaTime {
    display: inline-block;
    position: relative;
}

.progress {
    width: 100%;
    border: 1px solid;
    height: 10px;
    border-radius: 20px;
    margin-top: 10px;
    position: relative;
    box-sizing: border-box;
}

div#progressIn {
    width: 1%;
    height: 8px;
    min-width: 8px;
    margin: 0px;
    border-radius: 20px;
    background: #333;
    border: 1px solid #FFF !important;
    transition: background 1s;
    box-sizing: border-box;
}


.balance {
    display: flex;
    margin: 10px 0;
}

.current {
    flex: 2;
    font-weight: 600;
}

.whatIwant {
    color: #888;
}

.donationwrap {
    height: 200px;
    overflow: hidden;
    overflow-y: scroll;
    margin: 10px 0;
	display:none
}

.comment {
    padding: 10px;
    border-radius: 0px 10px 10px 10px;
    margin-top: 10px;
    word-wrap: break-word;
    display: inline-block;
    max-width: 100%;
    box-sizing: border-box;
	border: 1px solid;
}

.donatebody {
    display: flex;
}

.date {
    flex: 2;
	color: #999;
}

.donateamount:before {
    content: '+ ';
}

.donateamount:after, div#cur:after {
    content: ' ₽';
}

.donatewrap {
    margin: 20px 0;
    padding-top: 20px;
    border-top: 1px solid #d8d8d8;
	
}

.donatewrap:first-child {
    margin: 20px 0;
    padding-top: 0px;
    border-top: 0px;
	
}


@media (max-width: 430px) { 
body {
 margin: 0 !important;
 
}
.wrap {
    box-sizing: border-box;
    margin: 0 !important;
    max-width: none !important;
    border-radius: 0 !important;
	box-shadow: none;
	-moz-box-shadow: none;
	-webkit-box-shadow: none;
	padding: 5vw;
}
.mWrap {
	padding: 6vw 0;
}
h1 {
    font-size: 8vw;
    margin: 5vw 0;
}


p {
    font-size: 4.5vw;
    padding: 3vw 0 !important;
}

input#message, button.send, .amountsWrap>div {
    border-radius: 3vw;
}

div.Money {
    padding: 5vw;
	margin: 9vw 0;
	border-radius: 6vw;
}

button#send, input[type="text"],  .amountsWrap>div {
    font-size: 4vw;
	padding: 3vw;
}



.mText {
    font-size: 5vw;
}

.descSpan {
    font-size: 3vw;
}

.mButton {
    width: 12vw;
    height: 12vw;
}

input#howMuch {
    width: 24vw;
    font-size: 7vw;
    margin: 0;
    padding: 0 1vw;
}

input[type="text"] {
margin: 6vw 0px;
}

.amountsWrap {

    padding-bottom: 3vw;
}

.amountsWrap>div {
    padding: 2vw 4vw;
}

}

</style>
<script>
let cash = 100;

// если ты это читаешь и думаешь типа еба он чё даты записал текстом? да я даты записал текстом. 
// Да, я умею записывать даты таймштампами и потом их парсить и всё такое, но у меня вчера была смена 
// вкусвилл 16 часов и завтра 16 часов и спать мне 3 часа осталось, так что мне в падлу. Лучше задонать 
// мне пару косарей, я буду благодарен :) Ищу работу в компутерных сферах кстати)))
// да и текст добавлять в html будет легче в полевых условиях, с планшета например
     

let history = [
	[['06 января, 13:26'],[10],['']],
	[['06 января, 14:10'],[150],['На тачку!!!)))))']],
	[['07 января, 23:13'],[300],['']],
	[['08 января, 01:41'],[100],['']],
	[['09 января, 17:09'],[120],['']],
	[['09 января, 17:19'],[10],['Чаевые на чай, попей чай']],
	[['10 января, 19:27'],[100],['']],
	[['10 января, 21:28'],[100],['']],
	[['11 января, 19:44'],[200],['Желаю накопить на хорошую :)']],
        [['12 января, 11:04'],[300],['']],
]


function proceed() {

let parsemessage = ' ';
if (document.getElementById('message').value == '') {
	parsemessage = "Пожертвование с сайта"
} else {
	parsemessage = document.getElementById('message').value
}

parsemessage = window.location.search.substr(1)+' '+parsemessage;

location.href='https://money.yandex.ru/quickpay/confirm.xml?receiver=4100115237529766&quickpay-form=shop&targets='+encodeURIComponent(parsemessage)+'&label=Donate&sum='+cash+'&successURL=https%3A%2F%2Fnod365.github.io%2Fdonate%2Fthanks.html&paymentType=AC'


}

function cashud(d) {
	cash = parseInt(document.getElementById('howMuch').value);
	if (d) {
		let step;
		if (cash < 100) {step = 10} else if (cash < 300 ) {step = 50} else if (cash < 1500) {step = 100} else if (cash < 3000) {step = 500} else {step = 1000}
		cash = cash + step
	} else {
		let step;
		if (cash <= 100) {step = 10} else if (cash <= 300 ) {step = 50} else if (cash <= 1500) {step = 100} else if (cash <= 3000) {step = 500} else {step = 1000}
		cash = cash - step
	}
	document.getElementById('howMuch').value = cash;
	normalize();
}

function smartButton(am) {
	if (isNaN(am)) {
		return false;
	} else {
		document.getElementById('howMuch').value = am;
		normalize();
	}
}

function normalize() {
	if (document.getElementById('howMuch').value == '') {
		document.getElementById('howMuch').value = '0'
	}
	cash = parseInt(document.getElementById('howMuch').value);
	
	if (cash > 15000) {cash = 15000}
	if (cash < 10) {cash = 10}
	
	if (cash == 15000) {
		document.getElementById('aDown').style.opacity = 1;
		document.getElementById('aUp').style.opacity = 0;
	} else if (cash == 10) {
		document.getElementById('aDown').style.opacity = 0;
		document.getElementById('aUp').style.opacity = 1;
	} else {
		document.getElementById('aDown').style.opacity = 1;
		document.getElementById('aUp').style.opacity = 1;
	}
	document.getElementById('howMuch').value = cash;
}

document.addEventListener ("change", normalize, document.getElementById('howMuch'));

let color = 0,
	colors = [['007dfc','0062c4','0071e2'],['e539e6','fd6712','f14f7e'],['d690fb','975bff','ba78fc'],['32af91','7a60d7','508eae'],['c465ee','53d9ec','8c9fed'],['f3017b','660eb2','b00896'],['7e83fa','f5c4cd','b4a1e5'],['12bac6','b0f28d','6bd9a6']];


setInterval(changeColor, 11999);

function changeColor() {
//  color++;
//  if (color>=9) {color = 0}
	
	color = Math.round(Math.random()*7);
	console.log(color)
	document.getElementById('who').style.color = '#'+colors[color][0];
	
	//document.getElementById('noTea').style.background = '#'+colors[color][0];
	document.getElementById('progressIn').style.background = '#'+colors[color][0];
	
	document.getElementById('send').style.color = '#'+colors[color][2];
	
	document.getElementById('MoneyA').style.color = '#'+colors[color][0];
	document.getElementById('MoneyA').style.boxShadow = '0px 0px 40px -25px #'+colors[color][0];
	document.getElementById('MoneyA').style.border = ' 1px solid #'+colors[color][0];

	document.getElementById('Money').style.boxShadow = '0px 0px 40px -10px #'+colors[color][2]
	document.getElementById('colorTrick').style.background = 'linear-gradient(to right bottom, #'+colors[color][0]+', #'+colors[color][1]+' 120%) '
	document.getElementById('colorTrick').style.opacity = '1'  
	setTimeout(function() { 
		document.getElementById('colorTrick').style.opacity = '0'
		document.getElementById('Money').style.background = 'linear-gradient(to right bottom, #'+colors[color][0]+', #'+colors[color][1]+' 120%) '
	}, 1200);
}

function calculate() {

	const date = '2022-01-06T00:00:00.000Z'
	let currentDate = Date.parse(new Date());
	let days = Math.round((currentDate - Date.parse(date))/86400000);  
	
	let calccash = 0
	for (i=history.length-1; i>=0; i--) {
		document.getElementById('din').innerHTML += '<div class="donatewrap"><div class="donatebody"><div class="mText date">'+history[i][0]+'</div><div class="donateamount">'+history[i][1]+'</div>'+(history[i][2]==''?'':('</div><div class="comment">'+history[i][2]+'</div></div>'))
		calccash = calccash+parseInt(history[i][1])
	}
	document.getElementById('cur').innerHTML = calccash
	document.getElementById('updateinfo').innerHTML = 'Информация обновлена '+history[history.length-1][0]
	document.getElementById('updateinfo2').innerHTML = (history.length+1)+' донатов за '+days+' дней.'
	document.getElementById('progressIn').style.width = (100/120000*calccash)+'%'
}

let opened = 0
function openup() {
	if (opened) {
		document.getElementById('textmore').innerHTML = 'Подробнее...'
		document.getElementById('hide').style.display = 'none'
		opened = 0
	} else {
		document.getElementById('textmore').innerHTML = 'Свернуть...'
		document.getElementById('hide').style.display = 'block'
		opened = 1
	}
}

</script>
</head>
<body onload="changeColor(); calculate()">
	<div class="wrap">
		<div class="Hello">
		<h1>Хотите оставить водителю <span id="who" style="color:#222">чаевые?</span> Вы по адресу!</h1>
		
		<div class="Money Already" id="MoneyA" >
				<div onclick="openup()" class="mText">Статистика:</div>
				<div onclick="openup()"> <span class="descSpan" id="updateinfo" style="color:#333">Информация не обновлена</span></div>
				<div onclick="openup()"> <span class="descSpan" id="updateinfo2" style="color:#333"></span></div>
				<div onclick="openup()" class="progress"> <div id="progressIn" style="width:0%"> </div></div>
				<div onclick="openup()" class="balance"><div id="cur" class="current">0</div><div class="whatIwant"></div></div>
				<div onclick="openup()"> <span id="textmore" class="descSpan" style="color:#333; font-width: bold; text-decoration: underline">Подробнее...</span></div>
				<div id="hide" class="donationwrap">
					<div id="din" class="donationinner">
						
					</div>
				</div>
		</div>
		
		<p>Хотите оставить на чай? Тогда ниже расположена форма, которая направит Вас на страницу оплаты через ЮMoney. Укажите сумму и нажмите Перевести.</p>
		
		</div>
		<div class="Money" id="Money">
				<div id="colorTrick"> </div>
				<div class="mText">Выберите сумму: <span class="descSpan">до 15 000 руб.</span></div>
				<div class="mWrap">  <div id="aDown" class="mButton" onclick="cashud(0)"> </div> <input class="cash" id="howMuch" value="100" type="number"></input> <div id="aUp" class="mButton mPlus" onclick="cashud(1)"> </div></div>
				<div class="amountsWrap"><div id="am0" onclick="smartButton(100)"></div><div id="am1" onclick="smartButton(300)"></div><div id="am2" onclick="smartButton(500)"></div><div id="am3" onclick="smartButton(1000)"></div></div>
				<div class="mText">Комментарий: <span class="descSpan">Опционально</span></div>
				<input name="messtext" type=text id="message" placeholder="Напишите что-нибудь...">
				
				<button class="send" id="send" onclick="proceed()" type="button">Перевести</button>
		</div>
		
		<p class="disclaimer">Сайт не хранит данные банковских карт и их владельцев. Оплата производится через ЮMoney (Яндекс Деньги).</p>
		
		
	</div>
	
</body>
</html>
